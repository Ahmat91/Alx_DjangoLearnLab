{% extends 'blog/base.html' %}
{% load static %}

{% block title %}Blog Posts{% endblock %}

{% block content %}
    <div class="form-container">
        <h1>All Blog Posts ({{ posts.count }})</h1>
        
        {% if user.is_authenticated %}
            <p><a href="{% url 'post_create' %}" class="button-link"> + Create New Post</a></p>
        {% endif %}

        {% for post in posts %}
            <article class="post-entry">
                <h2><a href="{% url 'post_detail' pk=post.pk %}">{{ post.title }}</a></h2>
                <div class="post-meta">
                    <p>By **{{ post.author.username }}** on {{ post.published_date|date:"F j, Y" }}</p>
                </div>
                <div class="post-snippet">
                    <p>{{ post.content|truncatechars:200 }}</p>
                </div>
                <p><a href="{% url 'post_detail' pk=post.pk %}">Read More &raquo;</a></p>
            </article>
            <hr>
        {% empty %}
            <p>No posts have been published yet.</p>
        {% endfor %}
    </div>
{% endblock %}